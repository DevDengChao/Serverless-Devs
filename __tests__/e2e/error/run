#!/bin/

set -e

# Set environment variables to promise process not to exit automatically
export NODE_ENV=test

echo "default yaml not found"
sl error

echo "-t yaml file not found"
sl error -t not-found.yaml

echo "yaml format error"
sl error -t format-error.yaml

echo "yaml extend format error"
sl error -t ./extend/s.yaml

echo "component not found"
sl error -t component-not-found.yaml

echo "component with version not found"
export component=xxx@dev
sl error -t component-not-found.yaml

echo 'flow is invalid'
sl deploy -t invalid-flow.yaml

echo 'warning: the [xx] command was not found.'
sl xx -t basic.yaml

echo 'error: the [xx] command was not found.'
sl demo xx -t basic.yaml

echo 'api error'
sl apierror -t basic.yaml

echo 'output error'
sl deploy -t output.yaml

# 内置指令
echo 'sl config add --AccessKeyID 123 --AccessKeySecret 456 -a test'
sl config add --AccessKeyID 123 --AccessKeySecret 456 -a test

echo 'sl config get -a not-exist'
sl config get -a not-exist

echo 'sl config rename --source source --target target'
sl config rename --source source --target target  

echo 'sl config delete -a not-exist'
sl config delete -a not-exist

echo 'sl init --project xxx -d shltest'
sl init --project xxx -d shltest

echo 'sl init --project xxx@dev -d shltest'
sl init --project xxx@dev -d shltest
